<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Salud360 Report</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">
    <script>
        async function fetchData() {
            const pais = document.getElementById("pais").value;
            const comparar = document.getElementById("comparar").checked ? document.getElementById("pais_comparar").value : "";
            const criterio = document.getElementById("criterio").value;

            if (!pais || !criterio) {
                alert("Seleccione un país y un criterio.");
                return;
            }

            let url = `https://health360report.onrender.com/get_data?pais=${encodeURIComponent(pais)}&criterio=${encodeURIComponent(criterio)}`;
            if (comparar) {
                url += `&comparar=${encodeURIComponent(comparar)}`;
            }

            try {
                const response = await fetch(url);
                if (!response.ok) throw new Error("Error al obtener datos");

                const data = await response.json();

                let tabla = `<table>
                    <thead>
                        <tr><th>País</th><th>Criterio</th><th>Valor</th><th>Explicación</th><th>Fecha</th><th>Fuente</th></tr>
                    </thead>
                    <tbody>
                        <tr><td>${data.pais}</td><td>${data.criterio}</td><td>${data.valor}</td><td>${data.explicacion}</td><td>${data.fecha}</td><td>${data.fuente}</td></tr>`;

                if (comparar) {
                    tabla += `<tr><td>${data.comparar}</td><td>${data.criterio}</td><td>${data.valor_comparar}</td><td>${data.explicacion}</td><td>${data.fecha_comparar}</td><td>${data.fuente}</td></tr>`;
                }

                tabla += "</tbody></table>";
                document.getElementById("tabla_resultado").innerHTML = tabla;
            } catch (error) {
                console.error("Error:", error);
            }
        }
    </script>
</head>
<body>
    <main class="container">
        <h1>Salud360 Report</h1>
        <button onclick="fetchData()">Buscar</button>
        <div id="tabla_resultado"></div>
    </main>
</body>
</html>



